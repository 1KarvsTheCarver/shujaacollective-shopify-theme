{% comment %}
  Newsletter Signup - Adventure Theme
  Compatible with Shopify Horizon Theme
{% endcomment %}

<div class="section-background color-{{ section.settings.color_scheme }}"></div>
<div
  class="section section--{{ section.settings.section_width }} newsletter-adventure color-{{ section.settings.color_scheme }}"
  style="
    --padding-block-start: {{ section.settings.padding_block_start }}px;
    --padding-block-end: {{ section.settings.padding_block_end }}px;
  "
>
  <div class="page-width">
    <div class="newsletter-container">
      {%- if section.settings.heading != blank -%}
        <h2 class="newsletter-heading">{{ section.settings.heading }}</h2>
      {%- endif -%}

      {%- if section.settings.subheading != blank -%}
        <div class="newsletter-subheading">{{ section.settings.subheading }}</div>
      {%- endif -%}

      {%- form 'customer', class: 'newsletter-form' -%}
        <input type="hidden" name="contact[tags]" value="newsletter">

        <div class="newsletter-form-fields">
          <div class="form-field">
            <label for="newsletter-email-{{ section.id }}" class="visually-hidden">Email address</label>
            <input
              id="newsletter-email-{{ section.id }}"
              type="email"
              name="contact[email]"
              class="newsletter-input"
              value="{{ form.email }}"
              aria-required="true"
              autocorrect="off"
              autocapitalize="off"
              autocomplete="email"
              {% if form.errors %}
                aria-invalid="true"
                aria-describedby="Newsletter-error--{{ section.id }}"
              {% elsif form.posted_successfully? %}
                aria-describedby="Newsletter-success--{{ section.id }}"
              {% endif %}
              placeholder="{{ section.settings.email_placeholder }}"
              required
            >
          </div>

          <button
            type="submit"
            class="newsletter-button button button-primary"
            name="commit"
            id="Subscribe-{{ section.id }}"
            aria-label="{{ section.settings.button_label }}"
          >
            {{ section.settings.button_label }}
          </button>
        </div>

        {%- if form.errors -%}
          <div class="form-message form-message--error" id="Newsletter-error--{{ section.id }}">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
              <circle cx="10" cy="10" r="9" stroke="currentColor" stroke-width="2"/>
              <path d="M10 6v4M10 14v.01" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
            {{ form.errors.translated_fields.email | capitalize }} {{ form.errors.messages.email }}.
          </div>
        {%- elsif form.posted_successfully? -%}
          <div class="form-message form-message--success" id="Newsletter-success--{{ section.id }}">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
              <circle cx="10" cy="10" r="9" stroke="currentColor" stroke-width="2"/>
              <path d="M6 10l3 3 5-6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
            {{ 'newsletter.success' | t }}
          </div>
        {%- endif -%}
      {%- endform -%}
    </div>
  </div>
</div>

{% stylesheet %}
  .newsletter-adventure {
    padding-block-start: var(--padding-block-start);
    padding-block-end: var(--padding-block-end);
  }

  .newsletter-container {
    max-width: 600px;
    margin: 0 auto;
    text-align: center;
  }

  .newsletter-heading {
    font-size: 32px;
    font-weight: 700;
    margin: 0 0 16px 0;
    color: var(--color-foreground-heading);
  }

  .newsletter-subheading {
    font-size: 16px;
    margin-bottom: 32px;
    color: var(--color-foreground);
    opacity: 0.9;
  }

  .newsletter-form {
    width: 100%;
  }

  .newsletter-form-fields {
    display: flex;
    gap: 12px;
    margin-bottom: 16px;
  }

  .form-field {
    flex: 1;
  }

  .newsletter-input {
    width: 100%;
    padding: 14px 16px;
    font-size: 16px;
    border: 1px solid rgb(var(--color-border) / 0.3);
    border-radius: 4px;
    background: var(--color-background);
    color: var(--color-foreground);
    transition: border-color 0.2s;
  }

  .newsletter-input:focus {
    outline: none;
    border-color: var(--color-primary);
  }

  .newsletter-input::placeholder {
    color: rgb(var(--color-foreground) / 0.5);
  }

  .newsletter-button {
    padding: 14px 32px;
    font-size: 16px;
    font-weight: 600;
    white-space: nowrap;
    cursor: pointer;
  }

  .form-message {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    padding: 12px 16px;
    border-radius: 4px;
    font-size: 14px;
  }

  .form-message--error {
    background: rgba(220, 38, 38, 0.1);
    color: rgb(220, 38, 38);
  }

  .form-message--success {
    background: rgba(34, 197, 94, 0.1);
    color: rgb(34, 197, 94);
  }

  .visually-hidden {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
  }

  @media (max-width: 640px) {
    .newsletter-heading {
      font-size: 24px;
    }

    .newsletter-form-fields {
      flex-direction: column;
    }

    .newsletter-button {
      width: 100%;
    }
  }
{% endstylesheet %}

{% schema %}
{
  "name": "Newsletter Signup",
  "class": "section-newsletter-adventure",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Join the Adventure"
    },
    {
      "type": "text",
      "id": "subheading",
      "label": "Subheading",
      "default": "Get updates on new gear, latest videos, and exclusive offers."
    },
    {
      "type": "text",
      "id": "email_placeholder",
      "label": "Email Placeholder",
      "default": "Enter your email"
    },
    {
      "type": "text",
      "id": "button_label",
      "label": "Button Label",
      "default": "Sign Me Up"
    },
    {
      "type": "select",
      "id": "color_scheme",
      "label": "Color scheme",
      "options": [
        {
          "value": "scheme-1",
          "label": "Scheme 1"
        },
        {
          "value": "scheme-2",
          "label": "Scheme 2"
        },
        {
          "value": "scheme-3",
          "label": "Scheme 3"
        }
      ],
      "default": "scheme-2"
    },
    {
      "type": "select",
      "id": "section_width",
      "label": "Section width",
      "options": [
        {
          "value": "page-width",
          "label": "Page width"
        },
        {
          "value": "full-width",
          "label": "Full width"
        }
      ],
      "default": "page-width"
    },
    {
      "type": "range",
      "id": "padding_block_start",
      "min": 0,
      "max": 160,
      "step": 4,
      "unit": "px",
      "label": "Padding top",
      "default": 60
    },
    {
      "type": "range",
      "id": "padding_block_end",
      "min": 0,
      "max": 160,
      "step": 4,
      "unit": "px",
      "label": "Padding bottom",
      "default": 60
    }
  ],
  "presets": [
    {
      "name": "Newsletter Signup"
    }
  ]
}
{% endschema %}
